# 8장 URL 단축기 설계

클라이언트가 단축 URL로 접속 -> 단축URL 서버에서 원래 URL로 바꿔서 응답 헤더에 넣어서 내려줌 -> 클라이언트는 응답 받은 원래 URL로 접속

- 301 Permanently Moved : 해당 URL에 대한 HTTP 요청의 처리 책임이 영구적으로 Location 헤더에 반환된 URL로 이전되었다는 응답.
  브라우저는 이 응답을 캐시한다.

- 302 Found : 이 응답은 주어진 URL로의 요청이 일시적으로 Location 헤더가 지정하는 URL에 의해 처리되어야 한다는 응답.

URL 리디렉션을 구현하는 가장 직관적인 방법은 해시 테이블을 이용하는 것이다. 단축 URL, 원래 URL 쌍으로 지정

<br />

## URL 단축

URL을 단축시킬 해시 함수는 다음 요구사항을 만족해야 한다.

- 입력값이 다르면 해시 값도 달라야 한다.
- 해시 값은 원래 URL로 복원 가능해야 한다.

<br />

## 해시 함수 구현에 쓰일 기술

| 해시 후 충돌 해소 전략                                                                    | base-62 변환                                                                                                                 |
| ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| 단축 URL의 길이가 고정됨                                                                  | 단축 URL의 길이가 가변적, ID값이 커지면 같이 길어짐                                                                          |
| 유일성이 보장되는 ID 생성기가 필요치 않음                                                 | 유일성 보장 ID 생성기가 필요                                                                                                 |
| 충돌이 가능해서 해소 전략이 필요                                                          | ID의 유일성이 보장된 후에야 적용 가능한 전략이라 충돌은 아예 불가능                                                          |
| ID로부터 단축 URL을 계산하는 방식이 아니라서 다음에 쓸 수 있는 URL을 알아내는 것이 불가능 | ID가 1씩 증가하는 값이라고 가정하면 다음에 쓸 수 있는 단축 URL이 무엇인지 쉽게 알아낼 수 있어서 보안상 문제가 될 소지가 있음 |
